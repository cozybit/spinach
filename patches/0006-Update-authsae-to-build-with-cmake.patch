From 0796447d5fb5f94889005348c7f87eea409ac2f7 Mon Sep 17 00:00:00 2001
From: Jason Abele <jason@cozybit.com>
Date: Wed, 8 Aug 2012 11:40:34 -0700
Subject: [PATCH] Update authsae to build with cmake

---
 package/authsae/Makefile |   17 ++++-------------
 1 file changed, 4 insertions(+), 13 deletions(-)

diff --git a/package/authsae/Makefile b/package/authsae/Makefile
index bb8885e..ba84b93 100644
--- a/package/authsae/Makefile
+++ b/package/authsae/Makefile
@@ -20,8 +20,12 @@ PKG_REV:=HEAD
 PKG_SOURCE_VERSION:=$(PKG_REV)
 
 PKG_BUILD_PARALLEL:=1
+CMAKE_INSTALL:=1
+
+CMAKE_OPTIONS += -DSYSCONF_INSTALL_DIR=/etc
 
 include $(INCLUDE_DIR)/package.mk
+include $(INCLUDE_DIR)/cmake.mk
 
 define Package/authsae
   SECTION:=net
@@ -33,21 +37,8 @@ endef
 
 TARGET_CFLAGS += -D_GNU_SOURCE
 
-define Package/authsae/install
-	$(INSTALL_DIR) $(1)/usr/bin
-	$(INSTALL_BIN) $(PKG_BUILD_DIR)/linux/mon \
-                       $(PKG_BUILD_DIR)/linux/meshd \
-                       $(PKG_BUILD_DIR)/linux/meshd-nl80211 $(1)/usr/bin/
-	$(INSTALL_DIR) $(1)/etc
-	$(INSTALL_CONF) $(PKG_BUILD_DIR)/config/authsae.sample.cfg $(1)/etc/authsae.cfg
-endef
-
 define Package/conffiles
 	/etc/authsae.cfg
 endef
 
-define Build/Compile
-	$(MAKE) -C $(PKG_BUILD_DIR)/linux $(TARGET_CONFIGURE_OPTS) IS_OPENWRT=1
-endef
-
 $(eval $(call BuildPackage,authsae))
-- 
1.7.9.5

